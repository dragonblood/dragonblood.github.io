<!DOCTYPE html>
<html>
    <head>
        <link href="https://cdn.jsdelivr.net/npm/gridjs/dist/theme/mermaid.min.css" rel="stylesheet" />
    </head>
    <body>
        <h1>Candidates Selected</h1>
        <div id="wrapper">
            
        </div>
    </body>

    <script src="https://cdn.jsdelivr.net/npm/gridjs/dist/gridjs.umd.js"></script>

    <script type="module">
        import {
            Grid,
            html
        } from "https://unpkg.com/gridjs?module";
    </script>

    <script>
    
    //Getting the args from aras
    var args = window.frameElement ? window.frameElement.dialogArguments: window.dialogArguments,
    aras = (args && args.aras) ? args.aras : parent.aras;
    window.dialogArguments = args;

    //fetching the result
    var result = args.result.dom.all[2].innerHTML;

    const grid = new Grid({
    sort: true,
    search: true,
    pagination: true,
    columns: ['First name', 'Last name', 'State'],
    server: {
        url: result,
        handle: (res) => {
        return res.text().then(str => (new window.DOMParser()).parseFromString(str, "text/xml"));
        },
        then: data => {
        return Array.from(data.querySelectorAll('url'))
            .map(row => [
            row.querySelector('seligent_first_name').innerHTML,
            row.querySelector('seligent_last_name').innerHTML,
            row.querySelector('current_state').innerHTML,
            ]);
        }
    }
    });

    </script>
</html>
